# 📆 2022-03-21(MON)

## ☑️ 오늘 한 일 📑
- [ ] 읽은 책 서평 작성 (작성완료시 리스트에서 삭제)
    - [ ] 리팩토링 2판
- [x] JPA 7장
- [x] 이펙티브 자바 7장
- [] 알고리즘 레벨2 1문제 이상

<br>

***

### 🔍️ 오늘 무엇을 했나요? Review
#### JPA 고급  매핑
##### 조인 컬럼 
- 테이블 간에 관계는 주로 조인 컬럼이라 부르는 외래 키 컬럼을 사용해서 관리한다. 
- 외래 키에 `null`을 허용하는 관계를 선택적 비식별 관계라 한다. 
  - 외래 키에 `null`을 허용하므로 조인할 때 외부 조인(OUTER JOIN)을 사용해야 한다.
- `@JoinColumn` 으로 매핑

##### 조인 테이블
- 조인 테이블이라는 별도의 테이블을 사용해서 연관관계를 관리한다. 
- 조인 테이블을 사용하는 방법은 연관관계를 관리하는 조인 테이블을 추가하고 여기서 두 테이블의 외래 키를 가지고 연관관계를 관리한다. 
- `@JoinTable`로 매핑 
- 주로 다대다 관계를 일대다, 다대일 관계로 풀어내기 위해 사용
- 연결 테이블, 링크 테이블로도 부른다. 

- 기본은 조인 컬럼을 사용하고 필요하다고 판단되면 조인 테이블을 사용하자

##### 일대일 조인 테이블
- 조인 테이블의 외래 키 컬럼 각각에 총 2개의 유니크 제약조건을 걸어야 한다. 
- `@JoinTable` 속성
  - name : 매핑할 조인 테이블 이름
  - joinColumns : 현재 엔티티를 참조하는 외래 키 
  - inverseJoinColumns : 반대방향 엔티티를 참조하는 외래 키 
- 양방향으로 매핑하려면 `@OneToOne(mappedBy="")`를 추가하면 된다. 

##### 일대다 조인 테이블
- 일대다 관계를 만들려면 조인 테이블의 컬럼 중 다와 관련된 컬럼에 유니트 제약조건을 걸어야 한다.

##### 대대다 조인 테이블
- 다대다 관계를 만들려면 조인 테이블의 두 컬럼을 합해서 하나의 복합 유니크 제약조건을 걸어야 한다. 

##### `@SecondaryTable` 
- 한 엔티티에 여러 테이블을 매핑 
- `@SecondaryTable.name` : 매핑할 다른 테이블의 이름
- `@SecondaryTable.pkJoinColumns` : 매핑할 다른 테이블의 기본 키 컬럼 속성
- `@Column(table = "")`을 사용해서 테이블의 컬럼에 매핑할 수 있다. 테이블을 지정하지 않으면 기본 테이블에 매핑된다. 
- 더 많은 테이블을 매핑하려면 `@SecondaryTables`를 사용하면 된다. 
- `@SecondaryTable`를 사용해서 두 테이블을 하나의 엔티티에 매핑하는 방법보다는 테이블당 엔티티를 각각 만들어서 일대일 매핑하는 것을 권장
  - 일대일 매핑은 원하는 부분만 조회할 수 있고 필요하면 둘을 함께 조회하면 되지만 `@SecondaryTable`는 항상 두 테이블을 조회하므로 최적화가 어렵다. 

#### 이펙티브 자바 

#### 프로그래머스 
***

## 💡 오늘 회고

🎯 이번주 목표: **기억보단 기록**

***

## 🎯 내일 할 일 🎯
- [ ] 읽은 책 서평 작성 (작성완료시 리스트에서 삭제)
    - [ ] 리팩토링 2판
- [ ] JPA 8장
- [ ] 알고리즘 레벨2 1문제 이상
- [ ] 줌 클론코딩

***

## 🏁 이번주 목표 🏁
- [ ] 알고리즘 매일 1문제 이상
- [ ] 이펙티브 자바 9장까지 읽기
- [ ] 프로그래머의 뇌 스터디
- [ ] JPA 프로그래밍 9장까지 읽기
- [ ] 읽은 책들 서평 작성
- [ ] 노션 시작
- [ ] 줌 클론코딩 끝내기
- [ ] 개인 프로젝트 작업하기 