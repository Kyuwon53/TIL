# 📆 2022-03-17(THU)
## ☑️ 오늘 한 일 📑
- [ ] 읽은 책 서평 작성 (작성완료시 리스트에서 삭제) 
  - [ ] 자바와 JUnit을 활용한 실용주의 단위 테스트
  - [ ] 리팩토링 2판
- [ ] 이펙티브 자바 5장
- [x] 알고리즘 레벨2 1문제 이상
- [x] JPA 5장
<br>

***
### 🔍️ 오늘 무엇을 했나요? Review
#### 프로그래머스 [괄호 변환](https://github.com/Kyuwon53/Python-algorithm/tree/main/programmers/Level2/%EA%B4%84%ED%98%B8%20%EB%B3%80%ED%99%98)
- 아직 못풀었다. ................... 
- 너무 오랜시간 붙잡고 있으니깐 꼬이는 느낌이라 나중에 다시 봐야지
- 알고리즘 1문제당 30분 안으로 풀고 싶은데 연습이 많이 필요하겠지..

#### JPA 5장 연관관계 매핑 기초 
- 객체는 참조(주소)를 사용해서 관계를 맺고 테이블은 외래 키를 사용해서 관계를 맺는다. 
- 참조를 통한 연관관계는 언제나 단방향이다. 
  - 객체간에 연관관계를 양방향으로 만들고 싶으면 반대쪽에도 필드를 추가해서 참조를 보관해야 한다.
  - 양방향 관계가 아니라 **서로 다른 단방향** 관계 2개다. 
  
- 객체는 참조(주소)로 연관관계를 맺는다.
- 참조를 사용하는 객체의 연관관계는 단방향이다. 
- 외래 키를 사용하는 테이블의 연관관계는 양방향이다. 

- `@ManyToOne` : 다대일(N:1) 관계 
  - 연관관계를 매핑할 때 다중성을 나타내는 어노테이션은 필수
  - 단방향 관계를 매핑할 때 둘 중 어떤 것을 사용해야 할지는 반대편 관계에 달려 있다. 
  - 반대편이 일대다 관계면 다대일을 사용하고 반대편이 일대일 관계면 일대일을 사용하면 된다. 
  
- `@JoinColumn(name="")` :  조인 컬럼은 외래 키를 매핑할 때 사용한다. 
  - `name` 속성에는 매핑할 외래 키 이름을 지정한다. 
  - 이 어노테이션은 생략할 수 있다. 
    - 생략시 기본 전략을 사용한다. 
    - 기본 전략: 필드명 + _ + 참조하는 테이블의 컬럼명

- 수정은 따로 메소드가 없다. 단순히 불러온 엔티티의 값만 변경해두면 트랜잭션을 커밋할 때 플러시가 일어나면서 변경 감지 기능이 작동한다. 그리고 변경사항을 데이터베이스에 자동으로 반영한다.
  - 연관관계를 수정할 때도 같은데, 참조하는 대상만 변경하면 나머지는 JPA가 자동으로 처리한다. 
  
- 연관된 엔티티를 삭제하려면 기존에 있던 연관관계를 먼저 제거하고 삭제해야 한다. 그렇지 않으면 외래 키 제약조건으로 인해, 데이터베이스에서 오류가 발생한다.

- JPA에서는 두 객체 연관관계 중 하나를 정해서 테이블의 외래키를 관리해야 하는데 이것을 **연관관계의 주인**이라 한다. 
- 연관관계의 주인만이 데이터베이스 연관관계와 매핑되고 외래 키를 관리(등록, 수정, 삭제)할 수 있다. 반면에 주인이 아닌 쪽은 읽기만 할 수 있다.
  - 어떤 연관관계를 주인으로 정할지는 `mappedBy` 속성을 사용하면 된다. 
  - 주인은 `mappedBy` 속성을 사용하지 않는다.
  - 주인이 아니면 `mappedBy` 속성을 사용해서 속성의 값으로 연관관계의 주인을 지정해야 한다.
- 연관관계의 주인을 정한다는 것은 사실 외래 키 관리자를 선택하는 것이다. 
- 연관관계의 주인은 테이블에 외래 키가 있는 곳으로 정해야 한다. 
- 주인이 아닌 방향은 값을 설정하지 않아도 데이터베이스에 외래 키 값이 정상 입력된다. 
- 연관관계의 주인만이 외래 키의 값을 변경할 수 있다. 

- 객체 관점에서 양쪽 방향에 모두 값을 입력해주는 것이 가장 안전하다.

**연관관계의 주인은 외래 키의 위치와 관련해서 정해야지 비즈니스 중요도로 접급하면 안된다.**

***

## 💡  오늘  회고

오전 포모도로 내내 프로그래머스 레벨2의 괄호 변환 문제를 풀었는데 문제 안에 알고리즘 설명이 있지만 설명이 이해는 가나 
그걸 구현하는 것이 좀 정리가 안된다. 깔끔하게 정리된 알고리즘은 아니라서 여러 부분에서 오류가 있다. 일단은 다음에 다시 보는걸로..

JPA 5장 연관관계 매핑 기초를 봤다. 이제 좀 뭔가 JPA로 DB를 다루는 거 같다. 하지만 여전히 그래들 프로젝트에서 연결이 안된다. 
뭐가 문제인지 버전도 확인하고 연결설정도 재설정해봐도 연결이 안된다. 일단 메이븐 프로젝트로 예제들을 받아서 실행 후에 다시 시도해봐야지.

🎯 이번주 목표: **기억보단 기록** 

***

## 🎯 내일 할 일 🎯
- [ ] 읽은 책 서평 작성 (작성완료시 리스트에서 삭제) 
  - [ ] 자바와 JUnit을 활용한 실용주의 단위 테스트
  - [ ] 리팩토링 2판
- [ ] 이펙티브 자바 5-6장
- [ ] 알고리즘 레벨2 1문제 이상
- [ ] 줌 클론코딩

***

## 🏁 이번주 목표 🏁 
- [ ] 알고리즘 시작하기
- [ ] 이펙티브 자바 8장까지 읽기
- [ ] 프로그래머의 뇌 스터디
- [ ] JPA 프로그래밍 7장까지 읽기 
- [ ] 읽은 책들 서평 작성 
- [ ] 노션 시작
- [ ] 줌 클론코딩 끝내기
- [ ] 개인 프로젝트 작업하기 